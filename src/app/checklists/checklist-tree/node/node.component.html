<!-- TODO: Parent is taller than this div, make hover work on parent area -->
<div
  class="checklist-tree-node"
  (mouseover)="hideButtons = false"
  (focus)="hideButtons = false"
  (mouseleave)="hideButtons = true"
>
  <button
    *ngIf="node.isAddNew"
    mat-icon-button
    mat-medium-icon-button
    class="checklist-tree-node-add"
    [attr.aria-label]="node.title"
  >
    <mat-icon fontIcon="add" />
  </button>

  <div class="checklist-tree-node-title">
    @if (node.group && !node.checklist && !node.isAddNew) {
      <mat-select
        [(value)]="checklistGroupCategory"
        class="checklist-tree-node-title-category"
        [style]="this.checklistGroupCategories.get(checklistGroupCategory)!.style"
        panelWidth="6em"
      >
        @for (category of checklistGroupCategories; track category[0]) {
          <mat-option [value]="category[0]"
            ><span [style]="category[1].style">{{ category[1].viewValue }}</span></mat-option
          >
        }
      </mat-select>
    }
    <div class="checklist-tree-node-title">
      {{ node.title }}
    </div>
  </div>

  <span class="checklist-tree-node-spacer"></span>

  <div
    class="checklist-tree-node-buttons"
    *ngIf="!node.isAddNew"
    [style.visibility]="hideButtons ? 'hidden' : 'visible'"
  >
    <button
      mat-icon-button
      mat-small-icon-button
      [attr.aria-label]="'Rename ' + node.title"
      [matTooltip]="'Rename ' + node.title"
      (click)="nodeRename.emit(node)"
    >
      <mat-icon fontIcon="edit" />
    </button>
    <button
      mat-icon-button
      mat-small-icon-button
      [attr.aria-label]="'Delete ' + node.title"
      [matTooltip]="'Delete ' + node.title + ' and all its items'"
      (click)="nodeDelete.emit(node)"
    >
      <mat-icon fontIcon="delete" />
    </button>
  </div>
</div>
