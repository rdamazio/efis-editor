<!-- TODO: Parent is taller than this div, make hover work on parent area -->
<div
  class="checklist-tree-node"
  (mouseover)="hideButtons = false"
  (focus)="hideButtons = false"
  (mouseleave)="hideButtons = true"
>
  <button
    *ngIf="node.isAddNew"
    mat-icon-button
    mat-medium-icon-button
    class="checklist-tree-node-add"
    [attr.aria-label]="node.title"
  >
    <mat-icon>add</mat-icon>
  </button>

  <div class="checklist-tree-node-title">
    @if (!node.checklist && !node.isAddNew) {
      @switch (node.group?.category) {
        @case (ChecklistGroup_Category.normal) {
          <span>ðŸ„½</span>
        }
        @case (ChecklistGroup_Category.abnormal) {
          <span class="important">ðŸ„°</span>
        }
        @case (ChecklistGroup_Category.emergency) {
          <span class="danger">ðŸ„´</span>
        }
      }
    }
    {{ node.title }}
  </div>

  <span class="checklist-tree-node-spacer"></span>

  <div
    class="checklist-tree-node-buttons"
    *ngIf="!node.isAddNew"
    [style.visibility]="hideButtons ? 'hidden' : 'visible'"
  >
    <button
      mat-icon-button
      mat-small-icon-button
      [attr.aria-label]="'Rename ' + node.title"
      [matTooltip]="'Rename ' + node.title"
      (click)="nodeRename.emit(node)"
    >
      <mat-icon>edit</mat-icon>
    </button>
    <button
      mat-icon-button
      mat-small-icon-button
      [attr.aria-label]="'Delete ' + node.title"
      [matTooltip]="'Delete ' + node.title + ' and all its items'"
      (click)="nodeDelete.emit(node)"
    >
      <mat-icon>delete</mat-icon>
    </button>
  </div>
</div>
